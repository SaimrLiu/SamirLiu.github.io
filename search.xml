<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>Python 實現 RFM 用戶分析模型</title>
      <link href="/posts/32264.html"/>
      <url>/posts/32264.html</url>
      
        <content type="html"><![CDATA[<blockquote><p>RFM 是個簡易分析客戶價值的模型，在電商零售上常常使用。RFM 透過客戶<strong>近期的購買行為(Recency)</strong>、<strong>購買頻率(Frequency)</strong>、<strong>購買花費(Monetary)</strong> 三項指標評估客戶的價值狀況。</p></blockquote><h2 id="模型意義"><a href="#模型意義" class="headerlink" title="模型意義"></a>模型意義</h2><ul><li>最近一次消費(Recency)：<br>上一次消費時間越近的顧客應該是比較好的顧客，對提供即時的商品或是服務也最有可能會有反應。</li><li>消費頻率(Frequency)：<br>也就是常客，也可以說是客戶對品牌的忠誠度，頻率高的優於頻率低的客戶。</li><li>消費金額(Monetary)：<br>客戶消費力，依循 <a href="https://zh.wikipedia.org/wiki/%E5%B8%95%E7%B4%AF%E6%89%98%E6%B3%95%E5%88%99" target="_blank" rel="noopener">Pareto’s Law (八二法則)</a>，80％的銷售額來自20％的客戶，高消費金額優於低消費金額。</li></ul><h2 id="客戶分群意義"><a href="#客戶分群意義" class="headerlink" title="客戶分群意義"></a>客戶分群意義</h2><table><thead><tr><th>Recency 消費時間</th><th>Frequency 頻率</th><th>Monetary 金額</th><th>客戶分群</th></tr></thead><tbody><tr><td>近</td><td>高</td><td>高</td><td>高價值，常貴客戶</td></tr><tr><td>遠</td><td>高</td><td>高</td><td>高價值，流失客戶</td></tr><tr><td>近</td><td>低</td><td>高</td><td>高價值，新客戶</td></tr><tr><td>遠</td><td>低</td><td>高</td><td>高價值，淺在客戶</td></tr><tr><td>近</td><td>高</td><td>低</td><td>一般價值，常貴客戶</td></tr><tr><td>遠</td><td>高</td><td>低</td><td>一般價值，流失客戶</td></tr><tr><td>近</td><td>低</td><td>低</td><td>一般價值，新客戶</td></tr><tr><td>遠</td><td>低</td><td>低</td><td>一般價值，淺在客戶</td></tr></tbody></table><p>以 R 與 F 分析圖劃分<br><img src="/img/32264/000.jpg" alt=""></p><h2 id="Python-程式碼"><a href="#Python-程式碼" class="headerlink" title="Python 程式碼"></a>Python 程式碼</h2><p>使用 <a href="https://www.kaggle.com/carrie1/ecommerce-data" target="_blank" rel="noopener">kaggle</a> 的資料做練習</p><h3 id="Data-Prepare"><a href="#Data-Prepare" class="headerlink" title="Data Prepare"></a>Data Prepare</h3><p>資料清理，排除缺失值與負值，並計算出收益。</p><pre class=" language-python"><code class="language-python"><span class="token keyword">import</span> pandas <span class="token keyword">as</span> pd<span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> plt<span class="token keyword">import</span> seaborn <span class="token keyword">as</span> sns<span class="token keyword">from</span> datetime <span class="token keyword">import</span> datetime<span class="token comment" spellcheck="true"># Data Prepare</span>df <span class="token operator">=</span> pd<span class="token punctuation">.</span>read_csv<span class="token punctuation">(</span><span class="token string">'data.csv'</span><span class="token punctuation">,</span> encoding <span class="token operator">=</span> <span class="token string">"ISO-8859-1"</span><span class="token punctuation">)</span>df<span class="token punctuation">[</span><span class="token string">'InvoiceDate'</span><span class="token punctuation">]</span> <span class="token operator">=</span> pd<span class="token punctuation">.</span>to_datetime<span class="token punctuation">(</span>df<span class="token punctuation">[</span><span class="token string">'InvoiceDate'</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true"># 日期轉換</span>df_new <span class="token operator">=</span> df<span class="token punctuation">.</span>dropna<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true"># 排除缺失值</span>df_new <span class="token operator">=</span> df_new<span class="token punctuation">[</span>df_new<span class="token punctuation">.</span>Quantity <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">]</span> <span class="token comment" spellcheck="true"># 排除負值</span>df_new <span class="token operator">=</span> df_new<span class="token punctuation">[</span>df_new<span class="token punctuation">.</span>UnitPrice <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">]</span> <span class="token comment" spellcheck="true"># 排除負值</span>df<span class="token punctuation">[</span><span class="token string">'Revenue'</span><span class="token punctuation">]</span> <span class="token operator">=</span> df<span class="token punctuation">[</span><span class="token string">'Quantity'</span><span class="token punctuation">]</span> <span class="token operator">*</span> df<span class="token punctuation">[</span><span class="token string">'UnitPrice'</span><span class="token punctuation">]</span> <span class="token comment" spellcheck="true"># 收益計算</span>df<span class="token punctuation">[</span><span class="token string">'CustomerID'</span><span class="token punctuation">]</span> <span class="token operator">=</span> df<span class="token punctuation">[</span><span class="token string">'CustomerID'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>astype<span class="token punctuation">(</span><span class="token string">'int64'</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true"># CustomerID 轉換</span></code></pre><p><img src="/img/32264/001.png" alt=""></p><h3 id="RFM-Table"><a href="#RFM-Table" class="headerlink" title="RFM Table"></a>RFM Table</h3><p>統計個人消費行為，得到至今最近一次消費的天數、消費次數、消費總金額</p><pre class=" language-python"><code class="language-python">NOW <span class="token operator">=</span> datetime<span class="token punctuation">(</span><span class="token number">2011</span><span class="token punctuation">,</span><span class="token number">12</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true"># 資料最後一天為 2011/12/09</span>rfm_df <span class="token operator">=</span> df<span class="token punctuation">.</span>groupby<span class="token punctuation">(</span><span class="token string">'CustomerID'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>agg<span class="token punctuation">(</span><span class="token punctuation">{</span>    <span class="token string">'InvoiceDate'</span><span class="token punctuation">:</span> <span class="token keyword">lambda</span> x<span class="token punctuation">:</span> <span class="token punctuation">(</span>NOW <span class="token operator">-</span> x<span class="token punctuation">.</span>max<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>days<span class="token punctuation">,</span> <span class="token comment" spellcheck="true"># 近一次消費天</span>    <span class="token string">'InvoiceNo'</span><span class="token punctuation">:</span> <span class="token keyword">lambda</span> x<span class="token punctuation">:</span> x<span class="token punctuation">.</span>nunique<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            <span class="token comment" spellcheck="true"># 消費次數</span>    <span class="token string">'Revenue'</span><span class="token punctuation">:</span> <span class="token keyword">lambda</span> x<span class="token punctuation">:</span> x<span class="token punctuation">.</span>sum<span class="token punctuation">(</span><span class="token punctuation">)</span>                   <span class="token comment" spellcheck="true"># 消費金額</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span>reset_index<span class="token punctuation">(</span><span class="token punctuation">)</span>rfm_df<span class="token punctuation">.</span>rename<span class="token punctuation">(</span>    columns<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">'InvoiceDate'</span><span class="token punctuation">:</span> <span class="token string">'recency'</span><span class="token punctuation">,</span>              <span class="token string">'InvoiceNo'</span><span class="token punctuation">:</span> <span class="token string">'frequency'</span><span class="token punctuation">,</span>              <span class="token string">'Revenue'</span><span class="token punctuation">:</span> <span class="token string">'monetary'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>     inplace<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true"># 重新命名</span>rfm_df<span class="token punctuation">[</span><span class="token string">'user'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span> <span class="token comment" spellcheck="true"># 繪圖計數用</span></code></pre><p><img src="/img/32264/002.png" alt=""></p><h3 id="RFM-Model"><a href="#RFM-Model" class="headerlink" title="RFM Model"></a>RFM Model</h3><p>使用中位數(median)將數據分為兩級，也可以使用 33 與 66 分位(quantile)分三級</p><pre class=" language-python"><code class="language-python"><span class="token comment" spellcheck="true"># 根據值將資料分級</span><span class="token comment" spellcheck="true"># col_val: 輸入值, level: 分級級距</span><span class="token keyword">def</span> <span class="token function">get_level</span><span class="token punctuation">(</span>col_val<span class="token punctuation">,</span> level<span class="token punctuation">:</span> list<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">for</span> idx<span class="token punctuation">,</span> val <span class="token keyword">in</span> enumerate<span class="token punctuation">(</span>reversed<span class="token punctuation">(</span>level<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">if</span> col_val <span class="token operator">>=</span> val<span class="token punctuation">:</span>            <span class="token keyword">return</span> f<span class="token string">'≥{int(val)}'</span><span class="token comment" spellcheck="true"># 分級</span>recency_level <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> rfm_df<span class="token punctuation">[</span><span class="token string">'recency'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>median<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span>recency_label <span class="token operator">=</span> <span class="token punctuation">[</span>f<span class="token string">'≥{int(i)}'</span> <span class="token keyword">for</span> i <span class="token keyword">in</span> recency_level<span class="token punctuation">]</span>rfm_df<span class="token punctuation">[</span><span class="token string">'recency_label'</span><span class="token punctuation">]</span> <span class="token operator">=</span> rfm_df<span class="token punctuation">[</span><span class="token string">'recency'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>apply<span class="token punctuation">(</span>    <span class="token keyword">lambda</span> x<span class="token punctuation">:</span> get_level<span class="token punctuation">(</span>x<span class="token punctuation">,</span> recency_level<span class="token punctuation">)</span>    <span class="token punctuation">)</span>frequency_level <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> rfm_df<span class="token punctuation">[</span><span class="token string">'frequency'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>median<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span>frequency_label <span class="token operator">=</span> <span class="token punctuation">[</span>f<span class="token string">'≥{int(i)}'</span> <span class="token keyword">for</span> i <span class="token keyword">in</span> frequency_level<span class="token punctuation">]</span>rfm_df<span class="token punctuation">[</span><span class="token string">'frequency_label'</span><span class="token punctuation">]</span> <span class="token operator">=</span> rfm_df<span class="token punctuation">[</span><span class="token string">'frequency'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>apply<span class="token punctuation">(</span>    <span class="token keyword">lambda</span> x<span class="token punctuation">:</span> get_level<span class="token punctuation">(</span>x<span class="token punctuation">,</span> frequency_level<span class="token punctuation">)</span>    <span class="token punctuation">)</span>monetary_level <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> rfm_df<span class="token punctuation">[</span><span class="token string">'monetary'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>median<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span>monetary_label <span class="token operator">=</span> <span class="token punctuation">[</span>f<span class="token string">'≥{int(i)}'</span> <span class="token keyword">for</span> i <span class="token keyword">in</span> monetary_level<span class="token punctuation">]</span>rfm_df<span class="token punctuation">[</span><span class="token string">'monetary_label'</span><span class="token punctuation">]</span> <span class="token operator">=</span> rfm_df<span class="token punctuation">[</span><span class="token string">'monetary'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>apply<span class="token punctuation">(</span>    <span class="token keyword">lambda</span> x<span class="token punctuation">:</span> get_level<span class="token punctuation">(</span>x<span class="token punctuation">,</span> monetary_level<span class="token punctuation">)</span>    <span class="token punctuation">)</span></code></pre><p><img src="/img/32264/003.png" alt=""></p><h3 id="RFM-Draw"><a href="#RFM-Draw" class="headerlink" title="RFM Draw"></a>RFM Draw</h3><p>利用 seaborn 繪圖，分成四個區塊為各個客戶群，裡面兩條長條圖分別為高消費力與低消費力的人數</p><pre class=" language-python"><code class="language-python">g <span class="token operator">=</span> sns<span class="token punctuation">.</span>FacetGrid<span class="token punctuation">(</span>    rfm_df<span class="token punctuation">,</span> <span class="token comment" spellcheck="true"># 來源資料表</span>    col<span class="token operator">=</span><span class="token string">"recency_label"</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true"># X資料來源欄位</span>    row<span class="token operator">=</span><span class="token string">"frequency_label"</span> <span class="token punctuation">,</span>  <span class="token comment" spellcheck="true"># Y資料來源欄位</span>    col_order<span class="token operator">=</span>recency_label<span class="token punctuation">,</span>  <span class="token comment" spellcheck="true"># X資料順序</span>    row_order<span class="token operator">=</span>frequency_label<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true"># Y資料順序</span>    margin_titles<span class="token operator">=</span><span class="token boolean">True</span>  <span class="token comment" spellcheck="true"># 小圖啟用</span><span class="token punctuation">)</span>g <span class="token operator">=</span> g<span class="token punctuation">.</span>map_dataframe<span class="token punctuation">(</span>    sns<span class="token punctuation">.</span>barplot<span class="token punctuation">,</span> <span class="token comment" spellcheck="true"># 資料顯示的模式</span>    x<span class="token operator">=</span><span class="token string">'monetary_label'</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true"># 小圖表X資料來源</span>    y<span class="token operator">=</span><span class="token string">'user'</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true"># 小圖表Y資料來源，訪客計數</span>    order<span class="token operator">=</span>monetary_label<span class="token punctuation">,</span> <span class="token comment" spellcheck="true"># X資料順序</span>    estimator<span class="token operator">=</span>sum<span class="token punctuation">,</span>  <span class="token comment" spellcheck="true"># Y計數加總</span>    palette <span class="token operator">=</span> sns<span class="token punctuation">.</span>color_palette<span class="token punctuation">(</span><span class="token string">"muted"</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">#畫布色調 </span><span class="token punctuation">)</span> g <span class="token operator">=</span> g<span class="token punctuation">.</span>set_axis_labels<span class="token punctuation">(</span><span class="token string">'Recency'</span><span class="token punctuation">,</span><span class="token string">'Frequency'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>add_legend<span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre><p><img src="/img/32264/004.png" alt=""></p><h3 id="找出-VIP-客戶群"><a href="#找出-VIP-客戶群" class="headerlink" title="找出 VIP 客戶群"></a>找出 VIP 客戶群</h3><p>最後可以根據條件對不同客戶群分別做行銷</p><pre class=" language-python"><code class="language-python">vip <span class="token operator">=</span> rfm_df<span class="token punctuation">[</span>    <span class="token punctuation">(</span>rfm_df<span class="token punctuation">[</span><span class="token string">'frequency_label'</span><span class="token punctuation">]</span> <span class="token operator">==</span> frequency_label<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span>    <span class="token punctuation">(</span>rfm_df<span class="token punctuation">[</span><span class="token string">'recency_label'</span><span class="token punctuation">]</span> <span class="token operator">==</span> recency_label<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span>    <span class="token punctuation">(</span>rfm_df<span class="token punctuation">[</span><span class="token string">'monetary_label'</span><span class="token punctuation">]</span> <span class="token operator">==</span> monetary_label<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">]</span>vip<span class="token punctuation">.</span>head<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span></code></pre><p><img src="/img/32264/005.png" alt=""></p>]]></content>
      
      
      <categories>
          
          <category> Python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Google Analytics 內容分組</title>
      <link href="/posts/26559.html"/>
      <url>/posts/26559.html</url>
      
        <content type="html"><![CDATA[<blockquote><p>介紹一個很少人使用的好功能，內容分組可以把頁面依照自己的方式分類，之後在資料有使用到網頁(pagePath)這個維度就非常有幫助。</p></blockquote><h2 id="內容分組"><a href="#內容分組" class="headerlink" title="內容分組"></a>內容分組</h2><hr><h3 id="設置"><a href="#設置" class="headerlink" title="設置"></a>設置</h3><h4 id="到-管理-gt-資料檢視-gt-內容分組-新增內容分類。"><a href="#到-管理-gt-資料檢視-gt-內容分組-新增內容分類。" class="headerlink" title="到 管理 &gt; 資料檢視 &gt; 內容分組 新增內容分類。"></a>到 <code>管理 &gt; 資料檢視 &gt; 內容分組</code> 新增內容分類。</h4><p><img src="https://i.imgur.com/VBjyFDq.png" alt=""></p><h4 id="內容分組有三種分類方式，分別是追蹤程式碼、使用者資訊擷取、使用者規則定義，這邊使用使用者規則定義做範例。"><a href="#內容分組有三種分類方式，分別是追蹤程式碼、使用者資訊擷取、使用者規則定義，這邊使用使用者規則定義做範例。" class="headerlink" title="內容分組有三種分類方式，分別是追蹤程式碼、使用者資訊擷取、使用者規則定義，這邊使用使用者規則定義做範例。"></a>內容分組有三種分類方式，分別是追蹤程式碼、使用者資訊擷取、使用者規則定義，這邊使用使用者規則定義做範例。</h4><p><img src="https://i.imgur.com/bmWt9N6.png" alt=""><br>以我的網站來定義幾個常用的<br>類別分類頁 =&gt; 網頁 開頭是 <code>/categories/</code><br>標籤分類頁 =&gt; 網頁 開頭是 <code>/tags/</code><br>文章分類頁 =&gt; 網頁 開頭是 <code>/posts/</code></p><h4 id="最後注意幾點"><a href="#最後注意幾點" class="headerlink" title="最後注意幾點"></a>最後注意幾點</h4><ol><li>內容分組為設置完當下才會生效，並不會套用到過去資料。</li><li>分類順序要注意，一個頁面只會優先分到第一個媒合的內容分頁。<br><img src="https://i.imgur.com/CP4EVlb.png" alt=""></li><li>未被媒合的頁面會分類至<code>(not set)</code></li><li>內容分組為資料檢視層，不同資料檢視需另外設置。<h2 id="分類應用"><a href="#分類應用" class="headerlink" title="分類應用"></a>分類應用</h2></li></ol><hr><p>之後大部分有使用到網頁的維度皆可切換成內容分組，方便資料分析。<br><img src="https://i.imgur.com/Faz1Nla.png" alt=""></p>]]></content>
      
      
      <categories>
          
          <category> 網站分析 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Google Analytics </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>將 Google Analytics 數據同步到 Google Sheet</title>
      <link href="/posts/51238.html"/>
      <url>/posts/51238.html</url>
      
        <content type="html"><![CDATA[<blockquote><p>Google 試算表(Sheet) 有個好用的小工具，可以設定排程取得 Google Analytics 的數據，對習慣使用試算表的人是一大福音。</p></blockquote><h2 id="步驟"><a href="#步驟" class="headerlink" title="步驟"></a>步驟</h2><h3 id="安裝："><a href="#安裝：" class="headerlink" title="安裝："></a>安裝：</h3><ol><li>建立 Google Sheet。</li><li>安裝外掛工具，從<code>外掛程式 &gt; 取得外掛程式</code>可以找到 Google Analytics 的外掛工具。<br><img src="https://i.imgur.com/Zni371G.png" alt=""><br><img src="https://i.imgur.com/QlMQjiD.png" alt=""></li></ol><h3 id="建立報表："><a href="#建立報表：" class="headerlink" title="建立報表："></a>建立報表：</h3><ol><li>授權安裝後，點選<code>Create new report</code>。<br><img src="https://i.imgur.com/eR6sZO4.png" alt=""></li><li>根據需求選擇 Google Analytics、維度(Dimension)、指標(Metrics)後建立報表，維度跟指標的文件可以<a href="https://ga-dev-tools.appspot.com/dimensions-metrics-explorer/" target="_blank" rel="noopener">參考這邊</a>。<br><img src="https://i.imgur.com/v47c9cR.png" alt=""></li><li>會產生一個試算表 <code>Report Configuration</code>，是取得數據相關的任務設定。</li></ol><h3 id="執行與排程"><a href="#執行與排程" class="headerlink" title="執行與排程"></a>執行與排程</h3><ol><li>在選單可以選擇立即執行與設定排程。<br><img src="https://i.imgur.com/UbObaEX.png" alt=""></li><li>排成設定為自動跑報表的時間間隔。<br><img src="https://i.imgur.com/Ie2vaWE.png" alt=""></li></ol>]]></content>
      
      
      <categories>
          
          <category> 網站分析 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Google Analytics </tag>
            
            <tag> Google Sheet </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Facebook Pixel 代碼部署</title>
      <link href="/posts/16262.html"/>
      <url>/posts/16262.html</url>
      
        <content type="html"><![CDATA[<blockquote><p>Facebook Pixel？臉書像素？是 Facebook 的網頁追蹤代碼，用於追蹤與衡量網站的訪客，可以針對指定受眾做在行銷或是建立相似受眾找到更多的淺在客戶群，所以在 Facebook 上投放廣告之前埋設追蹤碼是必要的。不過 Facebook 在 Google Tag Manager 沒有預設模組，所以需要用自訂 HTML 設置，不過有一些地方需要注意，確保資訊有正確的送出，若有其他問題歡迎留言提問。</p></blockquote><h2 id="Facebook-Pixel"><a href="#Facebook-Pixel" class="headerlink" title="Facebook Pixel"></a>Facebook Pixel</h2><hr><h3 id="全頁追蹤-All-Pages"><a href="#全頁追蹤-All-Pages" class="headerlink" title="全頁追蹤 All Pages"></a>全頁追蹤 All Pages</h3><h4 id="PageView"><a href="#PageView" class="headerlink" title="PageView"></a>PageView</h4><p>這是預設的像素跟踪頁面訪問，在訪客登陸您的網站頁面時觸發，Facebook 後臺產生時會同時存在。</p><h5 id="設置："><a href="#設置：" class="headerlink" title="設置："></a>設置：</h5><ol><li>選用自訂 HTML 直接將程式碼貼上。</li><li>代碼觸發選項選用<strong>每個網頁一次</strong>，避免同一頁面觸發多次。</li><li>觸發條件選擇 All Pages。</li></ol><p><img src="https://i.imgur.com/2tzqOos.png" alt=""></p><h3 id="事件-Event"><a href="#事件-Event" class="headerlink" title="事件 Event"></a>事件 Event</h3><p><a href="https://developers.facebook.com/docs/facebook-pixel/reference" target="_blank" rel="noopener">官方</a>定義一些標準事件，這邊使用<code>ViewContent</code>與<code>Contact</code>做說明，兩者差異前者為到達頁面時觸發，後者為點擊觸發，在設置上稍有些不同，目的是確保訊息有正確的送出。</p><blockquote><p>Facebook 事件都建議使用 <a href="https://developers.facebook.com/docs/facebook-pixel/advanced/#tracking-events-for-individual-pixels" target="_blank" rel="noopener">trackSingle</a>，避免影響其他的 pixel 事件收集，導致後臺計算成效時有落差。<br>如：<code>fbq(&#39;trackSingle&#39;, &#39;&lt;Pixel Id&gt;&#39;, &#39;&lt;Event&gt;&#39;);</code> </p></blockquote><h4 id="到達指定頁面"><a href="#到達指定頁面" class="headerlink" title="到達指定頁面"></a>到達指定頁面</h4><h5 id="ViewContent"><a href="#ViewContent" class="headerlink" title="ViewContent"></a>ViewContent</h5><p>為到達指定頁面時觸發，需要注意的是要在 <a href="#PageView">PageView</a> 完成後才能執行，同類型的有 <code>InitiateCheckout</code>、<code>Purchase</code>。</p><h5 id="設置：-1"><a href="#設置：-1" class="headerlink" title="設置："></a>設置：</h5><ol><li>選用自訂 HTML 將事件代碼貼上。</li><li>代碼觸發順序勾選啟用前先啟用 <a href="#PageView">PageView</a> 代碼，這會確保代碼的執行順序。</li><li>觸發條件選擇 <a href="../posts/30024.html#觸發條件-Trigger">Dom Ready</a>，加上指定頁面條件，再次確保代碼執行順序。</li></ol><p><img src="https://i.imgur.com/NS5vCTb.png" alt=""></p><h4 id="指定元素點擊"><a href="#指定元素點擊" class="headerlink" title="指定元素點擊"></a>指定元素點擊</h4><h5 id="Contact"><a href="#Contact" class="headerlink" title="Contact"></a>Contact</h5><p>為點擊指定元素時觸發，通常發生時已經完成了 PageView 的事件，同類型常見的如：<code>AddToCart</code>、<code>AddToWishlist</code>、<code>Search</code>…等。</p><h5 id="設置：-2"><a href="#設置：-2" class="headerlink" title="設置："></a>設置：</h5><ol><li>選用自訂 HTML 將事件代碼貼上。</li><li>觸發條件選擇點擊，加上指定元素條件。</li></ol><p><img src="https://i.imgur.com/3mqLqcV.png" alt=""></p><h2 id="檢查小工具"><a href="#檢查小工具" class="headerlink" title="檢查小工具"></a>檢查小工具</h2><hr><p><a href="https://chrome.google.com/webstore/detail/facebook-pixel-helper/fdgfkebogiimcoedlicjlajpkdmockpc" target="_blank" rel="noopener">Facebook Pixel Helper</a><br><img src="https://i.imgur.com/mSSqp6n.png" alt=""></p>]]></content>
      
      
      <categories>
          
          <category> 網站分析 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Google Tag Manager </tag>
            
            <tag> Facebook </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Google Analytics 事件</title>
      <link href="/posts/25832.html"/>
      <url>/posts/25832.html</url>
      
        <content type="html"><![CDATA[<blockquote><p>之前的文章 <a href="../posts/30024.html">Google Tag Manager 入門</a>有提到如何用 GTM 設置全頁追蹤 GA。這次介紹另一個重要的功能<strong>事件</strong>，了解事件才算是脫離 GA 新手村。</p></blockquote><h2 id="Google-Analytics-事件"><a href="#Google-Analytics-事件" class="headerlink" title="Google Analytics 事件"></a>Google Analytics 事件</h2><hr><p>事件在網頁分析上是個重要的功能，需要在網站安裝自訂義的程式碼，才會搜集事件的資料，從此觀察訪客與網站的互動行為。</p><h3 id="事件的紀錄資料"><a href="#事件的紀錄資料" class="headerlink" title="事件的紀錄資料"></a>事件的紀錄資料</h3><p>所填入的值只要是自己有辦法辨識即可，這邊分享我習慣的設置想法。</p><ol><li>事件類別 (Category)<br>訪客預期得到動作，如：Search, AddToCart, Contact。</li><li>事件動作 (Action)<br>觸發事件的動作，如：Click, Scroll the page。</li><li>事件標籤 (Label)<br>敘述文字，連結、簡短的說明，依情況設置。</li><li>事件價值 (Value)<br>定義訪客互動的成效數值，依情況設置。</li></ol><h2 id="在-GTM-設置-GA-事件"><a href="#在-GTM-設置-GA-事件" class="headerlink" title="在 GTM 設置 GA 事件"></a>在 GTM 設置 GA 事件</h2><p>目標是追蹤首頁 <code>Social</code> 的四個按鈕的點擊次數。<br><img src="https://i.imgur.com/7539n4Z.png" alt=""></p><h3 id="設置"><a href="#設置" class="headerlink" title="設置"></a>設置</h3><h4 id="變數"><a href="#變數" class="headerlink" title="變數"></a>變數</h4><p>啟用內建變數<code>Click Element</code></p><h4 id="觸發條件"><a href="#觸發條件" class="headerlink" title="觸發條件"></a>觸發條件</h4><p><img src="https://i.imgur.com/pACxsHu.png" alt=""></p><h4 id="代碼"><a href="#代碼" class="headerlink" title="代碼"></a>代碼</h4><p><img src="https://i.imgur.com/GR9cTBZ.png" alt=""></p><blockquote><p>如果需要個別追點擊次數，可以分開設置觸發條件與代碼。</p></blockquote><h3 id="檢查-Debug"><a href="#檢查-Debug" class="headerlink" title="檢查(Debug)"></a>檢查(Debug)</h3><p>在發佈之前使用<a href="../posts/13266.html#Debug">預覽</a>檢查。<br><img src="https://i.imgur.com/axp3yzA.png" alt=""></p>]]></content>
      
      
      <categories>
          
          <category> 網站分析 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Google Tag Manager </tag>
            
            <tag> Google Analytics </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Google Analytics 基本參數設置</title>
      <link href="/posts/14176.html"/>
      <url>/posts/14176.html</url>
      
        <content type="html"><![CDATA[<blockquote><p>這篇整理常用 Google Analytics 常用設置的說明，可能使用的情境：管理訪客 Coockie、動態網頁追蹤、跨站追蹤、跨裝置追蹤，在默認的環境下這些功能是沒有的，所以需要做一些個人化的設定。</p></blockquote><h2 id="Google-Analytics-參數"><a href="#Google-Analytics-參數" class="headerlink" title="Google Analytics 參數"></a>Google Analytics 參數</h2><hr><p><a href="https://developers.google.com/analytics/devguides/collection/analyticsjs/field-reference" target="_blank" rel="noopener">官方文件</a></p><h6 id="clientId-text-："><a href="#clientId-text-：" class="headerlink" title="clientId(text)："></a><strong>clientId</strong>(text)：</h6><p>訪客匿名識別 id，即為 Google Analytics 的第一方 Cookie <code>_ga</code>，可以在使用者多層檢視找到，預設為兩組數字組成，如 <code>717269320.1574042822</code>，分別為隨機數字與進站時間作為訪客的唯一識別。</p><h6 id="cookieName-text-："><a href="#cookieName-text-：" class="headerlink" title="cookieName(text)："></a><strong>cookieName</strong>(text)：</h6><p>用於儲存第一方 cookie 的名稱，預設為<code>_ga</code>。</p><h6 id="sampleRate-number-："><a href="#sampleRate-number-：" class="headerlink" title="sampleRate(number)："></a><strong>sampleRate</strong>(number)：</h6><p>指定網站追蹤的用戶百分比。預設值為100。大流量網站可以降低讓 Google Analytics 保持在資料處理限制之內。</p><h6 id="siteSpeedSampleRate-number-："><a href="#siteSpeedSampleRate-number-：" class="headerlink" title="siteSpeedSampleRate(number)："></a><strong>siteSpeedSampleRate</strong>(number)：</h6><p>指定網站數據計算的抽樣比例，預設值為10。</p><h6 id="allowLinker-boolean-："><a href="#allowLinker-boolean-：" class="headerlink" title="allowLinker(boolean)："></a><strong>allowLinker</strong>(boolean)：</h6><p>預設為<code>false</code>，當需要跨站追蹤須設置為<code>true</code>。</p><h6 id="userId-text-："><a href="#userId-text-：" class="headerlink" title="userId(text)："></a><strong>userId</strong>(text)：</h6><p>訪客跨站、跨裝置的唯一識別 id，不能是能識別個人身份的資料(姓名、身分證字號、電子郵件地址等)，違反帳戶可能會被終止。</p><h6 id="page-text-："><a href="#page-text-：" class="headerlink" title="page(text)："></a><strong>page</strong>(text)：</h6><p>頁面路徑，應該以<code>/</code>開頭，於動態網頁時須設置。</p><h6 id="title-text-："><a href="#title-text-：" class="headerlink" title="title(text)："></a><strong>title</strong>(text)：</h6><p>頁面標題，於動態網頁時須設置。</p><h2 id="Google-Tag-Manager-設置參數"><a href="#Google-Tag-Manager-設置參數" class="headerlink" title="Google Tag Manager 設置參數"></a>Google Tag Manager 設置參數</h2><hr><p>在 Google Tag Manager 上設置非常簡單，只需要在 Google Analytics 的模組上新增所需要的欄位名稱與值就完成了。<br><img src="https://i.imgur.com/wMFdcAC.png" alt=""></p>]]></content>
      
      
      <categories>
          
          <category> 網站分析 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Google Tag Manager </tag>
            
            <tag> Google Analytics </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>頁面捲動深度追蹤</title>
      <link href="/posts/13266.html"/>
      <url>/posts/13266.html</url>
      
        <content type="html"><![CDATA[<blockquote><p>本站屬於技術分享的文章，最好的互動就是<strong>閱讀文章的深度</strong>，透過 GTM 可以簡單的設置當捲動深度達到目標百分比時當作是轉換。本篇可以拆分成三個部分：GTM 事件設定、GTM Debug、GA 目標設定。</p></blockquote><h2 id="Google-Tag-Manager-設置事件"><a href="#Google-Tag-Manager-設置事件" class="headerlink" title="Google Tag Manager 設置事件"></a>Google Tag Manager 設置事件</h2><hr><h3 id="Variable"><a href="#Variable" class="headerlink" title="Variable"></a>Variable</h3><p>啟用內建變數<code>Scroll Depth Threshold</code>，拿來當作事件價值使用。<br><img src="https://i.imgur.com/tHtwVnr.png" alt=""></p><h3 id="Trigger"><a href="#Trigger" class="headerlink" title="Trigger"></a>Trigger</h3><p>新增捲動深度的觸發條件，勾選捲動深度後分別設置 40 與 85 百分比，出發條件鎖定在文章頁面，開頭為 <code>/posts/</code>。<br><img src="https://i.imgur.com/OQt44S5.png" alt=""></p><p><img src="https://i.imgur.com/SZnI2t2.png" alt=""></p><h3 id="Tag"><a href="#Tag" class="headerlink" title="Tag"></a>Tag</h3><ol><li>新增通用 Analytics (分析)。</li><li>追蹤類型改成 <code>事件</code>。</li><li>填上自訂義的類別、動作或標籤，標籤與值帶上預設變數<code>Scroll Depth Threshold</code>。</li><li>帶上以設置好的 GAID (<a href="../posts/20419.html#使用-GTM-埋設-GA">不知道看這邊</a>)。</li><li>新增觸發條件<code>Scroll Depth 40</code>與<code>Scroll Depth 85</code></li></ol><p><img src="https://i.imgur.com/phuxJ4n.png" alt=""></p><h2 id="Debug"><a href="#Debug" class="headerlink" title="Debug"></a>Debug</h2><hr><p>基本上只要 <a href="#Google-Tag-Manager-設置事件">Google Tag Manager 設置事件</a>發佈後就完成了，不過在正式環境還是 Debug 一下比較安全。</p><h3 id="啟用預覽"><a href="#啟用預覽" class="headerlink" title="啟用預覽"></a>啟用預覽</h3><p>在 Google Tag Manager 右上角有個預覽按鈕，按下後出現橘色的框框即進入預覽模式。<br><img src="https://i.imgur.com/lqwRzoG.png" alt=""></p><h3 id="確認事件觸發"><a href="#確認事件觸發" class="headerlink" title="確認事件觸發"></a>確認事件觸發</h3><p>重新整理網站後底下出現 Debug 小工具，接著測試欲觸發的事件，確認左邊 Trigger 新增時，右邊 Tag 是否有被移動到 <code>Tags Fired On This Event</code>。<br><img src="https://i.imgur.com/3NLa2sE.png" alt=""></p><h3 id="確認變數"><a href="#確認變數" class="headerlink" title="確認變數"></a>確認變數</h3><p>接著點入 Tag，可以確認 Tag 被觸發時所帶的變數是否符合預期。<br><img src="https://i.imgur.com/hi8Pzhp.png" alt=""></p><h2 id="Google-Analytics-設置目標"><a href="#Google-Analytics-設置目標" class="headerlink" title="Google Analytics 設置目標"></a>Google Analytics 設置目標</h2><hr><p>目標用來衡量網站/應用程式<strong>達成指定目標</strong>的效果<a href="https://support.google.com/analytics/answer/1012040" target="_blank" rel="noopener">官方參考</a>，目標追蹤完成文章閱讀 (捲動百分比達 80% 以上)。</p><p>根據 Tag 上所帶的參數設定。<br><img src="https://i.imgur.com/nfUeA82.png" alt=""></p><p>之後就可以追訪客的目標達成率。<br><img src="https://i.imgur.com/pG0ogjW.png" alt=""></p>]]></content>
      
      
      <categories>
          
          <category> 網站分析 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Google Tag Manager </tag>
            
            <tag> Google Analytics </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Google Analytics 常用術語整理</title>
      <link href="/posts/32961.html"/>
      <url>/posts/32961.html</url>
      
        <content type="html"><![CDATA[<blockquote><p>使用 Google Analytics 不得不了解一些名詞，這邊整理了一些常見的名詞，希望對一些初次使用 Google Analytics 的人有些幫助。</p></blockquote><h2 id="工作階段-Session"><a href="#工作階段-Session" class="headerlink" title="工作階段 (Session)"></a>工作階段 (Session)</h2><hr><p>Session 是 Google Analytics 裡<strong>重要且實用</strong>的指標(metrics)，一個 Session 代表一個訪客在網站內所發生的一系列互動，瀏覽、點擊或電子商務等。當遇到以下三種情況時，會進入下一個 Session。</p><ul><li><strong>閒置網站超時</strong><br>預設為 30 分鐘，可以在 GA 後臺修改：設定 &gt; 資源 &gt; 追蹤資訊 &gt; 工作階段設定</li><li><strong>每天半夜 23:59:59</strong><br>過了午夜將用新的 Session 做計算。</li><li><strong>新的「來源/媒介」(source/medium)</strong><br>訪客透過第一種來源/媒介到站，隨後不論是否離開網站，再透過第二種來源/媒介回到網站，將用新的 Session 做計算。</li></ul><h2 id="來源-媒介-廣告活動-source-medium-campaign"><a href="#來源-媒介-廣告活動-source-medium-campaign" class="headerlink" title="來源, 媒介, 廣告活動 (source, medium, campaign)"></a>來源, 媒介, 廣告活動 (source, medium, campaign)</h2><hr><p>來源/媒介常用於追蹤廣告所帶來成效表現的維度(Dimension)。根據UTM參數，Google Analytics能辨別5件事：</p><table><thead><tr><th>UTM</th><th>說明</th><th>範例</th></tr></thead><tbody><tr><td>來源(Source)</td><td>標示為你網站流量的來源，如：網站、社群</td><td>utm_source=facebook</td></tr><tr><td>媒介(Medium)</td><td>標示為你網站流量的媒介，如：cpc、cpm</td><td>utm_medium=cpc</td></tr><tr><td>廣告活動(campaign)</td><td>廣告活動形式、名稱。</td><td>utm_campaign=1111_sale</td></tr><tr><td>關鍵字(term)</td><td>通常是付費關鍵字廣告所使用的字詞。</td><td>utm_term=隨勛所欲</td></tr><tr><td>廣告內容(content)</td><td>辨識同一廣告中不同內容的 A/B 測試。</td><td>utm_content=textlink</td></tr></tbody></table><h3 id="Google-Analytics-管道（可略過）"><a href="#Google-Analytics-管道（可略過）" class="headerlink" title="Google Analytics 管道（可略過）"></a>Google Analytics 管道（可略過）</h3><p>預設的系統管道定義反映出「預設管道分組」中，各管道組成元素目前的 Analytics (分析) 資料檢視。<a href="https://support.google.com/analytics/answer/3297892" target="_blank" rel="noopener">參考連結</a></p><table><thead><tr><th>管道</th><th>來源</th><th>媒介</th><th>說明</th></tr></thead><tbody><tr><td>直接 Direct</td><td>(direct)</td><td>(not set) or (none)</td><td></td></tr><tr><td>參照連結網址 Referral</td><td></td><td>(referral url)</td><td>媒介與參照連結網址達成完全比對。</td></tr><tr><td>隨機搜尋 Organic Search</td><td></td><td>(organic)</td><td>媒介與隨機搜尋達成完全比對。</td></tr><tr><td>付費搜尋 Paid Search</td><td></td><td>^(cpc|ppc|paidsearch)$</td><td></td></tr><tr><td>多媒體 Display</td><td></td><td>^(display|cpm|banner)$</td><td></td></tr><tr><td>其他廣告 Other Advertising</td><td></td><td>^(cpv|cpa|cpp|content-text)$</td><td></td></tr><tr><td>社交 Social</td><td></td><td>^(social|social-network|social-media|sm|social network|social media)$</td><td></td></tr><tr><td>電子郵件 Email</td><td></td><td>^(email)$</td><td></td></tr><tr><td>(Other)</td><td></td><td></td><td>工作階段未與任何管道說明達成比對。</td></tr></tbody></table><h2 id="新使用者-回訪者-使用者-使用者類型"><a href="#新使用者-回訪者-使用者-使用者類型" class="headerlink" title="新使用者, 回訪者, 使用者, 使用者類型"></a>新使用者, 回訪者, 使用者, 使用者類型</h2><hr><h3 id="新使用者-New-Users"><a href="#新使用者-New-Users" class="headerlink" title="新使用者 (New Users)"></a>新使用者 (New Users)</h3><p>指標(metrics)，訪客<strong>首次</strong>進站就會被記錄成新使用者，訪客的識別存於 cookie，所以當訪客切換了瀏覽器或是設備再次進站時，會被記錄另一個新使用者。</p><h3 id="回訪者-Returning-Users"><a href="#回訪者-Returning-Users" class="headerlink" title="回訪者 (Returning Users)"></a>回訪者 (Returning Users)</h3><p>指標(metrics)，非首次進站都是回訪者，當天一個新訪客產生第二次的 Session，這時新用戶記錄 1 筆，回訪者也紀錄 1 筆。</p><h3 id="使用者-Users"><a href="#使用者-Users" class="headerlink" title="使用者 (Users)"></a>使用者 (Users)</h3><p>指標(metrics)，不重複的使用者，不過用戶在不同設備和不同瀏覽器都會當作不同的使用者，並非真實唯一使用者。</p><h3 id="使用者類型-User-Type"><a href="#使用者類型-User-Type" class="headerlink" title="使用者類型 (User Type)"></a>使用者類型 (User Type)</h3><p>維度(Dimension)，可用於切分新使用者(New Visitor)與回訪者(Returning Visitor)。</p><h2 id="跳出率-離開率"><a href="#跳出率-離開率" class="headerlink" title="跳出率, 離開率"></a>跳出率, 離開率</h2><h3 id="跳出率-Bounce-Rate"><a href="#跳出率-Bounce-Rate" class="headerlink" title="跳出率 (Bounce Rate)"></a>跳出率 (Bounce Rate)</h3><p>當訪客進到登陸頁(Landing Page)後，沒有進行下一步的<strong>互動</strong>便直接離站，此登陸頁會紀錄 1 筆跳出(Bounce)，計算基於 Session。</p><blockquote><p><strong>互動：</strong><br>是指有在 Google Analytics 上設置的事件。<br>在一般只有全頁瀏覽追蹤的狀況下，第二頁的瀏覽行為視為所說的<strong>互動</strong>。<br>可以是將註冊、填表單、加入購物車等行為列為<strong>互動</strong>，以純文章網站可以是捲動網頁當作是完成閱讀的<strong>互動</strong>。</p></blockquote><blockquote><p><img src="https://i.imgur.com/pdVBJ93.png" alt=""></p></blockquote><h3 id="離開率-Exit-Rate"><a href="#離開率-Exit-Rate" class="headerlink" title="離開率 (Exit Rate)"></a>離開率 (Exit Rate)</h3><p>訪客離開網站的頁面，也可以說是 Session 最後一筆瀏覽頁面的紀錄，該網頁會紀錄 1 筆離開(Exit)，計算基於 Page View。</p><blockquote><p><img src="https://i.imgur.com/DBmrmEE.png" alt=""></p></blockquote><h4 id="例子"><a href="#例子" class="headerlink" title="例子"></a>例子</h4><pre><code>UserA: Page A &gt; Page B &gt; Page CUserB: Page A &gt; Page DUserC: Page CUserD: Page C &gt; Page A &gt; Page B</code></pre><p>跳出率與離開率計算結果如下：</p><h5 id="跳出率："><a href="#跳出率：" class="headerlink" title="跳出率："></a>跳出率：</h5><p>PageA: 0% (2 個 Session 於 PageA 開始，皆為非單頁的 Session)<br>PageB: 0%<br>PageC: 50% (2 個 Session 於 PageC 開始，1 筆為單頁的 Session)<br>PageD: 0%</p><h5 id="離開率："><a href="#離開率：" class="headerlink" title="離開率："></a>離開率：</h5><p>PageA: 0% (3 筆 PV 數，皆為最後一頁)<br>PageB: 50% (2 筆 PV 數，1 筆為最後一頁)<br>PageC: 67% (3 筆 PV 數，2 筆為最後一頁)<br>PageD: 100% (1 筆 PV 數，1 筆為最後一頁)</p><h2 id="停留時間"><a href="#停留時間" class="headerlink" title="停留時間"></a>停留時間</h2><hr><h3 id="網頁停留時間-Time-on-Page"><a href="#網頁停留時間-Time-on-Page" class="headerlink" title="網頁停留時間 (Time on Page)"></a>網頁停留時間 (Time on Page)</h3><p>訪客在特定頁面上花費的時間（以秒為單位），計算方法是從下一個頁面的初始查看時間減去前一頁面的初始查看時間。此指標不適用於該屬性的退出頁面。</p><h3 id="工作階段時間-Time-on-Site"><a href="#工作階段時間-Time-on-Site" class="headerlink" title="工作階段時間 (Time on Site)"></a>工作階段時間 (Time on Site)</h3><p>訪客 Session 的總時長（以秒為單位）。</p><p><img src="https://i.imgur.com/5rJdatv.png" alt=""></p>]]></content>
      
      
      <categories>
          
          <category> 網站分析 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Google Analytics </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Google Tag Manager 入門</title>
      <link href="/posts/30024.html"/>
      <url>/posts/30024.html</url>
      
        <content type="html"><![CDATA[<blockquote><p>前一篇文章(<a href="../posts/20419.html">GA?GTM? 傻傻分不清楚</a>)提到 GA 與 GTM 的差異，不過為什麼要多一層 GTM 呢？這次來講 GTM 的基本介紹與使用方法。</p></blockquote><h2 id="使用-Google-Tag-Manager-的優點"><a href="#使用-Google-Tag-Manager-的優點" class="headerlink" title="使用 Google Tag Manager 的優點"></a>使用 Google Tag Manager 的優點</h2><hr><h3 id="1-介面化操作新增、刪除、修改網站上的代碼。"><a href="#1-介面化操作新增、刪除、修改網站上的代碼。" class="headerlink" title="1. 介面化操作新增、刪除、修改網站上的代碼。"></a>1. 介面化操作新增、刪除、修改網站上的代碼。</h3><p>不懂程式也可以簡單在網頁設置追蹤碼，同時在管理追蹤上也更有效率。</p><h3 id="2-透過-GTM-可以快速測試代碼的可行性。"><a href="#2-透過-GTM-可以快速測試代碼的可行性。" class="headerlink" title="2. 透過 GTM 可以快速測試代碼的可行性。"></a>2. 透過 GTM 可以快速測試代碼的可行性。</h3><p>在預覽模式就可以在本端測試代碼執行狀況，在 Debug 的畫面上可以很快的找到問題。從新增、修正到發佈只需要短短幾分鐘，這將大大節省了時間。</p><h3 id="3-提高網站的速度"><a href="#3-提高網站的速度" class="headerlink" title="3. 提高網站的速度"></a>3. 提高網站的速度</h3><p>透過 GTM 去載入代碼是異步執行，這代表網站不會被載入較慢的代碼給拖累，提升網站的使用者體驗。</p><h2 id="設置-Google-Tag-Manager"><a href="#設置-Google-Tag-Manager" class="headerlink" title="設置 Google Tag Manager"></a>設置 Google Tag Manager</h2><hr><p>部署只需要在 GTM 裡找到兩段程式碼，分別放在 head 與 body 裡就完成了，參考官方 <a href="https://developers.google.com/tag-manager/quickstart" target="_blank" rel="noopener">Quick Start Guide</a>。<br><img src="https://i.imgur.com/SXkLWRl.png" alt=""></p><h2 id="Google-Tag-Manager-基本結構"><a href="#Google-Tag-Manager-基本結構" class="headerlink" title="Google Tag Manager 基本結構"></a>Google Tag Manager 基本結構</h2><hr><p><img src="https://i.imgur.com/Q1OHzIB.png" alt=""></p><h3 id="變數-variable"><a href="#變數-variable" class="headerlink" title="變數 (variable)"></a>變數 (variable)</h3><p>定義具名的預留值，供觸發條件與代碼使用，又細分為內建變數與使用者自定義變數，列出幾個我常使用的變數。</p><ul><li>內建變數 (Built-in Variables)：<br>Click Element<br>Click Classes<br>Click ID</li><li>使用者自訂變數（User-defines Variables）：<br>Google Analytics (分析) 設定</li></ul><h3 id="觸發條件-Trigger"><a href="#觸發條件-Trigger" class="headerlink" title="觸發條件 (Trigger)"></a>觸發條件 (Trigger)</h3><p>設定啟用代碼的規則與邏輯。</p><ul><li>網頁瀏覽<br>觸發順序：網頁瀏覽(PageView) =&gt; Dom 就緒(Dom Ready) =&gt; 視窗載入(Window Load)</li><li>點擊<br>會使用到內建變數點擊(Click) 系列，須自行去變數啟用。</li></ul><h3 id="代碼-Tag"><a href="#代碼-Tag" class="headerlink" title="代碼(Tag)"></a>代碼(Tag)</h3><p>設置想要觸發的程式碼，列出幾個我常使用的預設模板。</p><ul><li>Google Analytics (分析) – 通用 Analytics (分析)</li><li>Google Ads 再行銷</li><li>Google Ads 轉換追蹤</li><li>Bing 廣告通用事件追蹤</li><li>Hotjar Tracking Code</li></ul><p>當沒有預設模板使用<code>自訂 HTML</code>，如：Facebook Pixel</p><h2 id="在-GTM-設置-GA"><a href="#在-GTM-設置-GA" class="headerlink" title="在 GTM 設置 GA"></a>在 GTM 設置 GA</h2><hr><h3 id="設置"><a href="#設置" class="headerlink" title="設置"></a>設置</h3><h4 id="變數"><a href="#變數" class="headerlink" title="變數"></a>變數</h4><p>Google Analytics (分析) 設定，這變數好用在設定代碼時，不用每次都填入 GA Tracking ID 與相關的設定。<br><img src="https://i.imgur.com/0LLSnFU.png" alt=""></p><h4 id="觸發條件"><a href="#觸發條件" class="headerlink" title="觸發條件"></a>觸發條件</h4><p>預設就有<code>All Pages</code>，不需要設置。</p><h4 id="代碼"><a href="#代碼" class="headerlink" title="代碼"></a>代碼</h4><p>使用預設模板<code>Google Analytics (分析) – 通用 Analytics (分析)</code>，選擇變數<code>GAID</code>，選擇觸發條件<code>All Pages</code>，設置完後發佈。<br><img src="https://i.imgur.com/olaaQ1j.png" alt=""></p><h3 id="檢查工具"><a href="#檢查工具" class="headerlink" title="檢查工具"></a>檢查工具</h3><p>推薦使用 <a href="https://chrome.google.com/webstore/detail/tag-assistant-by-google/kejbdjndbnbjgmefkgdddjlbokphdefk" target="_blank" rel="noopener">Tag Assistant</a>，可以檢查 Google 服務的工具，啟用後重新整理網頁將會看到代碼的狀態。<br><img src="https://i.imgur.com/P6Wx8zc.png" alt=""></p><h2 id="其他小工具"><a href="#其他小工具" class="headerlink" title="其他小工具"></a>其他小工具</h2><hr><p>介紹幾個廣告應用的小工具</p><ul><li><a href="https://chrome.google.com/webstore/detail/tag-assistant-by-google/kejbdjndbnbjgmefkgdddjlbokphdefk" target="_blank" rel="noopener">Tag Assistant</a></li><li><a href="https://chrome.google.com/webstore/detail/facebook-pixel-helper/fdgfkebogiimcoedlicjlajpkdmockpc" target="_blank" rel="noopener">Facebook Pixel Helper</a></li><li><a href="https://chrome.google.com/webstore/detail/oath-ad-platforms-dot-hel/eppmoegdkngaleolkhdcdjoepijloikj" target="_blank" rel="noopener">Oath: Ad Platforms Dot Helper</a></li><li><a href="https://chrome.google.com/webstore/detail/uet-tag-helper-by-bing-ad/naijndjklgmffmpembnkfbcjbognokbf" target="_blank" rel="noopener">UET Tag Helper (by Bing Ads)</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> 網站分析 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Google Tag Manager </tag>
            
            <tag> Google Analytics </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>GA?GTM? 傻傻分不清楚</title>
      <link href="/posts/20419.html"/>
      <url>/posts/20419.html</url>
      
        <content type="html"><![CDATA[<h2 id="GA-跟-GTM-有什麼區別"><a href="#GA-跟-GTM-有什麼區別" class="headerlink" title="GA 跟 GTM 有什麼區別?"></a>GA 跟 GTM 有什麼區別?</h2><p>許多剛接觸 GA 跟 GTM 的人，常常搞不清楚它們的差別，在這邊盡量的簡單說明一下。<br><img src="https://pic.pimg.tw/serena0513/1512702551-2896529632.jpg" alt=""></p><h3 id="Google-Analytics-GA"><a href="#Google-Analytics-GA" class="headerlink" title="Google Analytics (GA)"></a>Google Analytics (GA)</h3><p>Google Analytics 主要是追蹤你的網站，產生報告跟統計資訊。<a href="https://marketingplatform.google.com/about/analytics/" target="_blank" rel="noopener">了解更多</a></p><ul><li>多少人訪問了你的網站</li><li>網站裡那些頁面是最受歡迎的</li><li>使用者是透過甚麼管道進到你的網站</li><li>使用者的輪廓統計(年齡層、性別、興趣、地區分佈)</li><li>使用者在網站瀏覽的行為流程</li></ul><h3 id="Google-Tag-Manager-GTM"><a href="#Google-Tag-Manager-GTM" class="headerlink" title="Google Tag Manager (GTM)"></a>Google Tag Manager (GTM)</h3><p>顧名思義<strong>代碼管理(Tag Manager)</strong>，Google Tag Manager 能讓用戶定義觸發某些代碼的規則，從而更輕鬆地管理這些混亂的代碼。</p><blockquote><p>Google Tag Manager 並<strong>不會取代</strong> Google Analytics，反而幫助用戶輕鬆將 Google Analytics 部屬到網站上。</p></blockquote><p> Google Tag Manager 不只適用於 Google Analytics，其他包括：</p><ul><li>Google Ads</li><li>Facebook Pixel</li><li>Bing Ads</li><li>Hotjar Tracking</li><li>其他自訂義 HTML/JavaScript 代碼</li></ul><p>GA GTM 的關係：<br><img src="https://i.imgur.com/uXNMR3M.png" alt=""></p><h3 id="使用-GTM-埋設-GA"><a href="#使用-GTM-埋設-GA" class="headerlink" title="使用 GTM 埋設 GA"></a>使用 GTM 埋設 GA</h3><p>這裡簡單的示範在 GTM 埋設 GA 追蹤代碼。</p><ol><li>在網站上設置 GTM，參考官方 <a href="https://developers.google.com/tag-manager/quickstart" target="_blank" rel="noopener">Quick Start Guide</a>。</li><li>找到 GA 追蹤編號。GA 後臺 (管理 &gt; 資源 &gt; 追蹤資訊 &gt; 追蹤程式碼) 即可找到如 <code>UA-XXXXXXX-XX</code> 的編號。</li><li>在 GTM 的代碼新增 <code>通用 Analytics (分析)</code> 的模塊，啟用覆寫後填入 GA 編號。</li><li>觸發條件選擇網頁瀏覽的 <code>All Pages</code>。</li><li>最後儲存後發佈。<br><img src="https://i.imgur.com/7IZ7XzF.png" alt=""></li></ol><p>以上就完成了基本設置。GA 將會追蹤所有已安裝 GTM 所有頁面的瀏覽量。</p><hr><blockquote><p>最後分享個 Chrome 的檢查小工具 Tag Assistant，啟用後在網站上就可以檢查各種 Google 相關產品的標籤狀態。<a href="https://chrome.google.com/webstore/detail/tag-assistant-by-google/kejbdjndbnbjgmefkgdddjlbokphdefk" target="_blank" rel="noopener"><strong>連結點我</strong></a><br><img src="https://i.imgur.com/HXyGXWl.png" alt=""></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> 網站分析 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Google Tag Manager </tag>
            
            <tag> Google Analytics </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Markdown 簡易手冊</title>
      <link href="/posts/6756.html"/>
      <url>/posts/6756.html</url>
      
        <content type="html"><![CDATA[<h2 id="標題"><a href="#標題" class="headerlink" title="標題"></a>標題</h2><p>當您想要將一段文字標示為標題的時候，請使用這個語法。<br>請在行首輸入 <code>#</code> 符號，並在後面加上一個空白後，再輸入標題文字。<br>標題有分成 6 個層級，<code>#</code> 的數量愈多，層級越低。</p><p>您可以按照範例輸入看看：</p><pre><code># 第一層級標題## 第一層級標題### 第一層級標題#### 第一層級標題##### 第一層級標題###### 第一層級標題</code></pre><p>以上範例結果為：</p><h1 id="第一層級標題"><a href="#第一層級標題" class="headerlink" title="第一層級標題"></a>第一層級標題</h1><h2 id="第一層級標題-1"><a href="#第一層級標題-1" class="headerlink" title="第一層級標題"></a>第一層級標題</h2><h3 id="第一層級標題-2"><a href="#第一層級標題-2" class="headerlink" title="第一層級標題"></a>第一層級標題</h3><h4 id="第一層級標題-3"><a href="#第一層級標題-3" class="headerlink" title="第一層級標題"></a>第一層級標題</h4><h5 id="第一層級標題-4"><a href="#第一層級標題-4" class="headerlink" title="第一層級標題"></a>第一層級標題</h5><h6 id="第一層級標題-5"><a href="#第一層級標題-5" class="headerlink" title="第一層級標題"></a>第一層級標題</h6><p>:::info<br>:bulb: 小提示：覺得語法容易忘記嗎？沒關係！<br>HackMD 提供貼心的自動完成功能，例如：您在行首輸入 <code>#</code>，就會出現自動完成選單，提示您可用的標題語法！</p><img width=500 src=https://i.imgur.com/fyFgCez.png?)>:::<h2 id="清單"><a href="#清單" class="headerlink" title="清單"></a>清單</h2><p>當您想要列舉一些項目的時候，請使用此語法，並且可以加上項目編號，將項目縮排即可作為子清單。<br>清單分為<strong>有序清單</strong>與<strong>無序清單</strong>兩種。有序清單是項目符號會使用數字編號；無序清單是項目符號會使用同樣的層級的符號。</p><p>您可以按照範例輸入看看：</p><pre><code>- 無序清單- 無序清單    - 無序清單子清單        - 無序清單子子清單1. 有序清單2. 有序清單    1. 有序清單子清單        1. 有序清單子子清單</code></pre><p>以上範例結果為：</p><ul><li>無序清單</li><li>無序清單<ul><li>無序清單子清單<ul><li>無序清單子子清單</li></ul></li></ul></li></ul><ol><li>有序清單</li><li>有序清單<ol><li>有序清單子清單<ol><li>有序清單子子清單</li></ol></li></ol></li></ol><h2 id="引用區塊"><a href="#引用區塊" class="headerlink" title="引用區塊"></a>引用區塊</h2><p>當您需要將一段文字標示為引用的時候，請使用此語法。<br>請在行首輸入 <code>&gt;</code> 符號，並在後面加上一個空白後，再輸入引用文字，即可形成引用區塊。如在引用區塊前多次輸入 <code>&gt;</code> 符號，即是子引用區塊。</p><p>您可以按照範例輸入看看：</p><pre><code>&gt; 引用區塊&gt;&gt; 子引用區塊&gt;&gt;&gt; 子子引用區塊</code></pre><p>以上範例結果為：</p><blockquote><p>引用區塊</p><blockquote><p>子引用區塊</p><blockquote><p>子子引用區塊</p></blockquote></blockquote></blockquote><h2 id="粗體、斜體"><a href="#粗體、斜體" class="headerlink" title="粗體、斜體"></a>粗體、斜體</h2><p>當您需要將一段文字以粗體或是斜體表現的時候，請用此語法。<br>請在文字兩端加上 <code>*</code> 符號，即可將文字變成粗體或是斜體<br>使用一個 <code>*</code> 為斜體；使用兩個 <code>*</code> 為粗體。</p><p>您可以按照範例輸入看看：</p><pre><code>*斜體***粗體**</code></pre><p>以上範例結果為：</p><p><em>斜體</em><br><strong>粗體</strong></p><p>:::info<br>:bulb: 小提示：使用編輯區塊上方的工具列，快速對選取中的文字加上格式</p><p><img src="https://i.imgur.com/Cnle9f9.png" alt=""><br>:::</p><h2 id="圖片"><a href="#圖片" class="headerlink" title="圖片"></a>圖片</h2><p>當您需要在筆記中加入圖片的時候，請使用此語法。<br>請先輸入 <code>![]()</code> 這些文字，然後在後面的 <code>()</code> 中間插入圖片的網址，即可加入圖片。<br>您也可以將圖片直接拖曳到編輯器、複製圖片後直接在編輯器貼上，都會直接將圖片上傳到 <a href="https://imgur.com/" target="_blank" rel="noopener">imgur</a> 後自動插入圖片語法。</p><p>您可以按照範例輸入看看：</p><pre><code>![](https://hackmd.io/favicon.png)</code></pre><p>以上範例結果為：</p><p><img src="https://hackmd.io/favicon.png" alt=""></p><p>:::info<br>:bulb: 小提示：在空白之後輸入 <code>!</code> 會有自動完成，提示您可用的圖片語法</p><img width=500 src="https://i.imgur.com/sZJf6AJ.png" >:::<h2 id="影片"><a href="#影片" class="headerlink" title="影片"></a>影片</h2><p>當您需要加入影片的時候，請使用此語法。<br>請先輸入 <code>{}</code> 這些文字，這時候會有自動完成：</p><img width=500 src="https://i.imgur.com/e2dWOvX.png" ><p>接下來請按下列步驟：</p><ol><li>在自動完成中選擇您的影片來源，可能是 youtube 或是 vimeo</li><li>假設您選擇 youtube，您的文字會變成 <pre><code>{%youtube youtubeid %}</code></pre></li><li>假設您的影片連結是：<code>https://www.youtube.com/watch?v=PJuNmlE74BQ</code></li><li>請您將文字中的 <code>youtubeid</code> 替換成您影片連結的 id，也就是 <code>PJuNmlE74BQ</code></li><li>您的文字最後會是：<code><div class="video-container"><iframe src="//www.youtube.com/embed/PJuNmlE74BQ" frameborder="0" allowfullscreen></iframe></div></code></li></ol>]]></content>
      
      
      <categories>
          
          <category> 隨筆 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> markdown </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hexo 常用指令</title>
      <link href="/posts/23955.html"/>
      <url>/posts/23955.html</url>
      
        <content type="html"><![CDATA[<h2 id="文章"><a href="#文章" class="headerlink" title="文章"></a>文章</h2><p>命令行中輸入：</p><pre class=" language-bash"><code class="language-bash">$ hexo new <span class="token string">"new article"</span>  <span class="token comment" spellcheck="true"># 建立文章</span>$ hexo new draft <span class="token string">"draft article"</span>  <span class="token comment" spellcheck="true"># 建立草稿</span>$ hexo publish <span class="token string">"draft article"</span>  <span class="token comment" spellcheck="true"># 發布文章</span></code></pre><p>之後在 <code>source/_posts</code> 目錄下面，多了一個 <code>new-article.md</code> 的文件。</p><p>打開之後我們會看到：</p><pre class=" language-markdown"><code class="language-markdown"><span class="token hr punctuation">---</span>title: new articledate: 2019-11-01 20:10:33<span class="token title important">tags:<span class="token punctuation">---</span></span></code></pre><p>文件的開頭是屬性，採用統一的yaml格式，用三條短橫線分隔。下面是文章正文。</p><p>文章的正文支持markdown格式，建議你先學習一下它的語法。markdown不像html似的一大堆標籤，很簡單，只有幾個符號。</p><p>新建、刪除或修改文章後，不需要重啟hexo server，刷新一下即可預覽。</p><h2 id="屬性"><a href="#屬性" class="headerlink" title="屬性"></a>屬性</h2><p>文章可以擁有如下屬性：</p><table><thead><tr><th>Setting</th><th>Description</th><th>Default</th></tr></thead><tbody><tr><td>layout</td><td>layout</td><td>post或page</td></tr><tr><td>title</td><td>文章的標題</td><td></td></tr><tr><td>date</td><td>創建日期</td><td>文件的創建日期</td></tr><tr><td>updated</td><td>修改日期</td><td>文件的修改日期</td></tr><tr><td>comments</td><td>是否開啟評論</td><td>true</td></tr><tr><td>tags</td><td>標籤</td><td></td></tr><tr><td>categories</td><td>分類</td><td></td></tr><tr><td>permalink</td><td>url中的名字</td><td>文件名</td></tr></tbody></table><h2 id="部屬"><a href="#部屬" class="headerlink" title="部屬"></a>部屬</h2><p>本端測試</p><pre class=" language-bash"><code class="language-bash">$ hexo s --draft</code></pre><p>清空暫存</p><pre class=" language-bash"><code class="language-bash">$ hexo clean</code></pre><p>打包並部屬</p><pre class=" language-bash"><code class="language-bash">$ hexo d -g</code></pre>]]></content>
      
      
      <categories>
          
          <category> 隨筆 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> hexo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hello World</title>
      <link href="/posts/16107.html"/>
      <url>/posts/16107.html</url>
      
        <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><pre class=" language-bash"><code class="language-bash">$ hexo new <span class="token string">"My New Post"</span></code></pre><p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><pre class=" language-bash"><code class="language-bash">$ hexo server</code></pre><p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><pre class=" language-bash"><code class="language-bash">$ hexo generate</code></pre><p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><pre class=" language-bash"><code class="language-bash">$ hexo deploy</code></pre><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html" target="_blank" rel="noopener">Deployment</a></p>]]></content>
      
      
      <categories>
          
          <category> 隨筆 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> hexo </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
